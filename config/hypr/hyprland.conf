monitor=,preferred,auto,auto

$terminal = alacritty
$menu = ncat -U /run/user/1000/walker/walker.sock
# walker

exec-once = uwsm app -- firefox &
exec-once = uwsm app -- alacritty &
exec-once = uwsm app -- keepassxc &

#####################
### KEYBINDINGS ####
#####################
$mainMod = ALT

bind = SUPER, q, killactive,
bind = ALT SHIFT, q, exit # exit hyprland

bind = SUPER, Return, exec, $terminal
bind = SUPER, space, exec, $menu

bind = SUPER, l, exec, hyprlock
bind = SUPER, p, exec, nwg-displays

bind = SUPER, s, exec, pavucontrol

# System control
bind = SUPER SHIFT, q, exec, systemctl poweroff
bind = SUPER SHIFT, r, exec, reboot

# Screenshot and keyboard toggle
bind = SUPER SHIFT, s, exec, grim -g "$(slurp)" -t ppm - | satty --filename - --output-filename ~/Pictures/screenshots/$(date '+%Y%m%d-%H:%M:%S').png
bind = SUPER SHIFT, c, exec, hyprpicker -a
bind = CTRL SUPER ALT SHIFT, s, exec, grim -t ppm - | satty --filename - --output-filename ~/Pictures/screenshots/$(date '+%Y%m%d-%H:%M:%S').png
# bind = CTRL SUPER ALT SHIFT, s, exec, grim -g "$(slurp -o -r -c '##ff0000ff')" -t ppm - | satty --filename - --output-filename ~/Pictures/Screenshots/satty-$(date '+%Y%m%d-%H:%M:%S').png

# bind = $mainMod, B, exec, pkill -SIGUSR1 waybar
bind = SUPER, b, exec, pkill waybar || waybar

# Set master window size (between 5% and 95%)
bind = $mainMod, m, layoutmsg, resize 0.05
bind = $mainMod, i, layoutmsg, addmaster
bind = $mainMod, d, layoutmsg, removemaster
bind = $mainMod, Return, layoutmsg, swapwithmaster

bind = SUPER, f, fullscreen
bind = $mainMod, Space, togglefloating

bind = $mainMod, l, resizeactive, 20 0
bind = $mainMod, h, resizeactive, -20 0

bind = $mainMod, k, cyclenext
bind = $mainMod, j, cyclenext, prev

# bind = $mainMod, h, movefocus, l
# bind = $mainMod, l, movefocus, r
# bind = $mainMod, k, movefocus, u
# bind = $mainMod, j, movefocus, d

# Workspace switching
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Move focus with mainMod + arrow keys

# Focus monitor
bind = $mainMod, comma, focusmonitor, l
bind = $mainMod, period, focusmonitor, r

# Kill window
# Quit Hyprland

# Mouse binds
bindm = ALT, mouse:272, movewindow
bindm = ALT, mouse:273, resizewindow

# no hypland update messages
ecosystem {
    enforce_permissions = 1
    no_update_news = true
}

permission = /usr/(bin|local/bin)/grim, screencopy, allow
permission = /usr/(bin|local/bin)/hyprlock, screencopy, allow
permission = /usr/(bin|local/bin)/hyprpicker, screencopy, allow
permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow
permission = /usr/(bin|local/bin)/hyprpm, plugin, allow

general {
    gaps_in = 6
    gaps_out = 6

    border_size = 0

    # https://wiki.hyprland.org/Configuring/Variables/#variable-types for info about colors
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)

    # Set to true enable resizing windows by clicking and dragging on borders and gaps
    resize_on_border = false

    # Please see https://wiki.hyprland.org/Configuring/Tearing/ before you turn this on
    allow_tearing = false

    layout = master
}

# # https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    rounding = 2
    rounding_power = 2

    # Change transparency of focused and unfocused windows
    active_opacity = 1.0
    inactive_opacity = .95

    shadow {
        enabled = false
        range = 4
        render_power = 3
        color = rgba(1a1a1aee)
    }

    # https://wiki.hyprland.org/Configuring/Variables/#blur
    blur {
        enabled = true
        size = 11
        passes = 1

        vibrancy = 0.1696
    }
}

# https://wiki.hyprland.org/Configuring/Variables/#animations
animations {
    enabled = no

    # Default animations, see https://wiki.hyprland.org/Configuring/Animations/ for more

    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = easeInOutCubic,0.65,0.05,0.36,1
    bezier = linear,0,0,1,1
    bezier = almostLinear,0.5,0.5,0.75,1.0
    bezier = quick,0.15,0,0.1,1

    animation = global, 1, 10, default
    animation = border, 1, 5.39, easeOutQuint
    animation = windows, 1, 4.79, easeOutQuint
    animation = windowsIn, 1, 4.1, easeOutQuint, popin 87%
    animation = windowsOut, 1, 1.49, linear, popin 87%
    animation = fadeIn, 1, 1.73, almostLinear
    animation = fadeOut, 1, 1.46, almostLinear
    animation = fade, 1, 3.03, quick
    animation = layers, 1, 3.81, easeOutQuint
    animation = layersIn, 1, 4, easeOutQuint, fade
    animation = layersOut, 1, 1.5, linear, fade
    animation = fadeLayersIn, 1, 1.79, almostLinear
    animation = fadeLayersOut, 1, 1.39, almostLinear
    animation = workspaces, 1, 1.94, almostLinear, fade
    animation = workspacesIn, 1, 1.21, almostLinear, fade
    animation = workspacesOut, 1, 1.94, almostLinear, fade
}
dwindle {
    pseudotile = true # Master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = true # You probably want this
}

master {
    new_status = master
}

misc {
    disable_hyprland_logo = true
    disable_splash_rendering  = true
    focus_on_activate = true
}

cursor {
    hide_on_key_press = true
}

# Cursor size
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

# Force all apps to use Wayland
env = GDK_BACKEND,wayland,x11,*
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_STYLE_OVERRIDE,kvantum
env = SDL_VIDEODRIVER,wayland
env = MOZ_ENABLE_WAYLAND,1
env = ELECTRON_OZONE_PLATFORM_HINT,wayland
env = OZONE_PLATFORM,wayland
env = XDG_SESSION_TYPE,wayland

# Allow better support for screen sharing (Google Meet, Discord, etc)
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland

xwayland {
  force_zero_scaling = true
}

input {
    kb_layout = us,hu
    kb_variant = ,
    kb_model =
    kb_options = grp:alt_space_toggle,caps:swapescape
    kb_rules =

    follow_mouse = 1

    sensitivity = 0.1 # -1.0 - 1.0, 0 means no modification.

    touchpad {
        natural_scroll = true
    }
}

# https://wiki.hyprland.org/Configuring/Variables/#gestures
# gestures {
#     workspace_swipe = false
# }

# # See https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs for more
# device {
#     name = epic-mouse-v1
#     sensitivity = -0.5
# }

bindl = , XF86ScreenSaver , exec, hyprlock
bindl = , XF86Display , exec, nwg-displays

# Only display the OSD on the currently focused monitor
$osdclient = swayosd-client --monitor "$(hyprctl monitors -j | jq -r '.[] | select(.focused == true).name')"

# Laptop multimedia keys for volume and LCD brightness (with OSD)
bindeld = ,XF86AudioRaiseVolume, Volume up, exec, $osdclient --output-volume raise
bindeld = ,XF86AudioLowerVolume, Volume down, exec, $osdclient --output-volume lower
bindeld = ,XF86AudioMute, Mute, exec, $osdclient --output-volume mute-toggle
bindeld = ,XF86AudioMicMute, Mute microphone, exec, $osdclient --input-volume mute-toggle
bindeld = ,XF86MonBrightnessUp, Brightness up, exec, $osdclient --brightness raise
bindeld = ,XF86MonBrightnessDown, Brightness down, exec, $osdclient --brightness lower

# Precise 1% multimedia adjustments with Alt modifier
bindeld = SHIFT, XF86AudioRaiseVolume, Volume up precise, exec, $osdclient --output-volume +1
bindeld = SHIFT, XF86AudioLowerVolume, Volume down precise, exec, $osdclient --output-volume -1
bindeld = SHIFT, XF86MonBrightnessUp, Brightness up precise, exec, $osdclient --brightness +1
bindeld = SHIFT, XF86MonBrightnessDown, Brightness down precise, exec, $osdclient --brightness -1

# Requires playerctl
bindld = , XF86AudioNext, Next track, exec, $osdclient --playerctl next
bindld = , XF86AudioPause, Pause, exec, $osdclient --playerctl play-pause
bindld = , XF86AudioPlay, Play, exec, $osdclient --playerctl play-pause
bindld = , XF86AudioPrev, Previous track, exec, $osdclient --playerctl previous



# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
windowrule = opacity 0.97 0.9, class:.*
windowrulev2 = suppressevent maximize, class:.*
windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# windowrulev2 = float, class:^(mpv)$
windowrulev2 = workspace 1, class:^(alacritty)$
windowrulev2 = workspace 2, class:^(firefox)$
# windowrulev2 = workspace 3, class:^(rdesktop)$
# windowrulev2 = workspace 5, class:^(Zathura)$
windowrulev2 = workspace 7, class:^(gimp)$
windowrulev2 = workspace 8, class:^(discord)$
windowrulev2 = workspace 9, class:^(org.keepassxc.KeePassXC)$

windowrulev2 = float, class:^(org.pulseaudio.pavucontrol|nm-connection-editor|blueman-manager|gnome-calculator|gimp)$
windowrulev2 = center, class:^(org.pulseaudio.pavucontrol|gimp)$
windowrulev2 = size 1000 800, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = float, title:^(File Operation Progress)$
# windowrulev2 = float, class:^(org.keepassxc.KeePassXC)$

windowrulev2 = noanim, class:^(org.keepassxc.KeePassXC|steam|gimp)$
windowrulev2 = noshadow, class:^(org.keepassxc.KeePassXC|gimp)$
windowrulev2 = opaque, class:^(org.keepassxc.KeePassXC|gimp)$

windowrulev2 = noborder, class:^(obs)$
windowrulev2 = noshadow, class:^(steam)$
windowrulev2 = rounding 0, class:^(steam)$


windowrulev2 = float, xwayland:1, title:^(Open File|Save As)$
windowrulev2 = center, xwayland:1, title:^(Open File|Save As)$

# Matches: "nextcloud", "org.nextcloud.Nextcloud", "com.nextcloud.desktopclient.nextcloud"
$NEXTCLOUD = ^(?i)(nextcloud|org\.nextcloud\.nextcloud|com\.nextcloud\.desktopclient\.nextcloud)$
# windowrulev2 = float,  class:$NEXTCLOUD
# windowrulev2 = center, class:$NEXTCLOUD
# Optional: set a comfortable default size for dialogs
# windowrulev2 = size 1100 720, class:$NEXTCLOUD

# Some Qt/Wayland combos animate oddlyâ€”these reduce flicker/quirks
windowrulev2 = noanim,   class:$NEXTCLOUD
windowrulev2 = noshadow, class:$NEXTCLOUD
windowrulev2 = opaque,   class:$NEXTCLOUD

# windowrulev2 = stayfocused, class:$NEXTCLOUD
windowrule = opacity 0.0 override, class:^(xwaylandvideobridge)$
windowrule = noanim, class:^(xwaylandvideobridge)$
windowrule = noinitialfocus, class:^(xwaylandvideobridge)$
windowrule = maxsize 1 1, class:^(xwaylandvideobridge)$
windowrule = noblur, class:^(xwaylandvideobridge)$
windowrule = nofocus, class:^(xwaylandvideobridge)$

windowrulev2 = tile, class:^(Chromium)$
windowrulev2 = float, class:^(Impala)$
# Floating windows
windowrulev2 = float, tag:floating-window
windowrulev2 = center, tag:floating-window
windowrulev2 = size 800 600, tag:floating-window
windowrulev2 = tag +floating-window, class:(Power|blueberry.py|Impala|Wiremix|org.gnome.NautilusPreviewer|com.gabm.satty|Omarchy|About|TUI.float)
# windowrulev2 = tag +floating-window, class:(xdg-desktop-portal-gtk|sublime_text|DesktopEditors|org.gnome.Nautilus), title:^(Open.*Files?|Open [F|f]older.*|Save.*Files?|Save.*As|Save|All Files)
# No transv2parency on media windows
windowrulev2 = opacity 1 1, class:^(zoom|vlc|mpv|org.kde.kdenlive|com.obsproject.Studio|com.github.PintaProject.Pinta|imv|org.gnome.NautilusPreviewer)$
