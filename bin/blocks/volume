#!/bin/sh

#!/bin/bash
# show-volume.sh

VOLUME_RAW=$(wpctl get-volume @DEFAULT_AUDIO_SINK@)
VOLUME=$(echo "$VOLUME_RAW" | awk '{print int($2 * 100)}')
MUTED=$(echo "$VOLUME_RAW" | grep -q MUTED && echo true || echo false)

if [[ "$MUTED" == "true" ]]; then
    ICON="🔇"
else
    if [ "$VOLUME" -eq 0 ]; then
        ICON="🔈"  # zero
    elif [ "$VOLUME" -le 30 ]; then
        ICON="🔉"  # low
    elif [ "$VOLUME" -le 70 ]; then
        ICON="🔊"  # medium
    else
        ICON="📢"  # high
    fi
fi

echo "$ICON $VOLUME%"


# # Get volume and mute state
# volume=$(pamixer --get-volume)
# muted=$(pamixer --get-mute)
#
# # Pick icon
# if [ "$muted" = "true" ]; then
#     icon="󰖁"
#     echo "$icon mute"
# else
#     if [ "$volume" -lt 30 ]; then
#         icon="󰕿"
#     elif [ "$volume" -lt 70 ]; then
#         icon="󰖀"
#     else
#         icon="󰕾"
#     fi
#     echo "$icon $volume%"
# fi
#
